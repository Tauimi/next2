# 🛒 TechnoMart - Интернет-магазин электроники

Современный интернет-магазин электроники и бытовой техники, построенный на **Next.js 14** с **TypeScript**, **Tailwind CSS** и **Prisma ORM**.

## ✨ Особенности

### 🎯 **UX/UI**
- ✅ **Правило 3-х кликов** - любой товар за 3 клика
- ✅ **Адаптивный дизайн** - идеально работает на всех устройствах
- ✅ **Золотое сечение** в пропорциях дизайна
- ✅ **Максимум 3 цвета** в палитре + оттенки
- ✅ **Крупные читаемые шрифты** (максимум 3 шрифта)
- ✅ **Плавные анимации** без перегрузки
- ✅ **Версия для слабовидящих**

### 🔧 **Функциональность**
- 🔍 **Мгновенный поиск** с автодополнением
- 🛒 **Умная корзина** - всегда видна в правом углу
- ❤️ **Избранное и сравнение** товаров
- ⭐ **Система отзывов** и рейтингов
- 📞 **Кнопка заказа звонка** в шапке
- ↑ **Кнопка "Вверх"** зафиксирована снизу
- 🚀 **Все действия без перезагрузки** страницы

### 🏢 **Корпоративные страницы**
- 📖 **О компании** - история, преимущества
- 💼 **Проекты** - портфолио работ
- 🤝 **Клиенты и партнеры** 
- 📰 **Новостная лента** с актуальным контентом
- 📚 **База знаний** - статьи, FAQ, термины
- 🗺️ **Карта сайта** и навигация

### 🛍️ **E-commerce**
- 📱 **Каталог товаров** с фильтрацией
- 🏷️ **Категории и бренды**
- 💰 **Система скидок** и акций
- 📦 **Управление заказами**
- 👤 **Личный кабинет** пользователя
- 🔐 **Безопасная авторизация**

## 🛠️ **Технологический стек**

### **Frontend**
- ⚡ **Next.js 14** (App Router)
- 🔷 **TypeScript** - типизация
- 🎨 **Tailwind CSS** - стилизация
- 🎬 **Framer Motion** - анимации
- 🗃️ **Zustand** - управление состоянием
- 📋 **React Hook Form** - формы
- 🔥 **React Hot Toast** - уведомления

### **Backend**
- 🔌 **Next.js API Routes**
- 🗄️ **Prisma ORM** - работа с БД
- 🐘 **PostgreSQL** - база данных
- 🔐 **NextAuth.js** - аутентификация
- ✅ **Zod** - валидация данных

### **Деплой**
- 🚀 **Vercel** - хостинг и деплой
- 📊 **Vercel Analytics** - аналитика
- ⚡ **Edge Runtime** - производительность

## 🚀 **Быстрый старт**

📖 **[Подробная инструкция по настройке](./SETUP.md)**

```bash
# 1. Установите зависимости
npm install

# 2. Создайте .env.local с DATABASE_URL и NEXTAUTH_SECRET
# 3. Примените схему базы данных
npx prisma db push

# 4. Запустите проект
npm run dev

# 5. Зарегистрируйтесь на сайте
# Первый зарегистрированный пользователь станет администратором
```

👑 **Первый пользователь = Администратор**
- Первый зарегистрированный пользователь автоматически получает права администратора
- Доступ к админ-панели: `/admin`

## 📁 **Структура проекта**

```
next/
├── app/                    # App Router (Next.js 14)
│   ├── (main)/            # Корпоративные страницы
│   │   ├── about/         # О компании
│   │   ├── services/      # Услуги/товары
│   │   ├── projects/      # Проекты
│   │   ├── clients/       # Клиенты и партнеры
│   │   ├── news/          # Новости
│   │   └── info/          # Справочная информация
│   ├── (shop)/            # E-commerce
│   │   ├── catalog/       # Каталог товаров
│   │   ├── cart/          # Корзина
│   │   ├── checkout/      # Оформление заказа
│   │   └── profile/       # Личный кабинет
│   ├── api/               # API маршруты
│   │   ├── products/      # CRUD товаров
│   │   ├── orders/        # Заказы
│   │   ├── reviews/       # Отзывы
│   │   └── auth/          # Аутентификация
│   ├── admin/             # Админ-панель
│   ├── globals.css        # Глобальные стили
│   ├── layout.tsx         # Основной layout
│   └── page.tsx           # Главная страница
├── components/            # React компоненты
│   ├── ui/               # Базовые UI компоненты
│   ├── layout/           # Header, Footer, Navigation
│   ├── shop/             # Компоненты магазина
│   ├── corporate/        # Корпоративные компоненты
│   └── admin/            # Админ компоненты
├── lib/                  # Утилиты и конфигурация
├── hooks/                # Custom React hooks
├── store/                # Zustand состояние
├── types/                # TypeScript типы
├── prisma/               # Схема БД и миграции
│   ├── schema.prisma     # Схема базы данных
│   └── seed.ts           # Начальные данные
└── public/               # Статические файлы
```

## 🎨 **Дизайн-система**

### **Цветовая палитра**
```css
/* Основные цвета (максимум 3) */
--primary: #3b82f6    /* Синий */
--secondary: #64748b  /* Серый */
--accent: #f59e0b     /* Оранжевый */
```

### **Типографика**
- **Display**: Inter (заголовки)
- **Body**: System UI (основной текст)
- **Accent**: Montserrat (кнопки, акценты)

### **Размеры по золотому сечению**
- `text-2xl`: 1.618rem (~26px)
- `text-3xl`: 2.618rem (~42px)
- `golden`: 1.618rem отступы

## 🔐 **Администрирование**

### **Доступ к админ-панели**
- URL: `/admin` 
- 🔒 **Защищено:** Доступ только для пользователей с правами администратора
- 👁️ **Скрыто:** Ссылка на админ-панель видна только администраторам
- 👑 **Первый зарегистрированный пользователь автоматически становится администратором!**
- При отсутствии прав - автоматическое перенаправление на страницу входа

### **Основные функции админки**
- 📦 **Управление товарами** - добавление, редактирование
- 📊 **Заказы** - просмотр и обработка
- 👥 **Пользователи** - управление аккаунтами
- 📰 **Контент** - новости, статьи, проекты
- 📈 **Аналитика** - статистика продаж

## 🚀 **Деплой на Vercel**

1. Подключите GitHub репозиторий к Vercel
2. Добавьте переменные окружения (DATABASE_URL, NEXTAUTH_SECRET)
3. После деплоя откройте: `https://your-app.vercel.app/api/force-init`

📚 **[Подробное руководство](./DEPLOY_GUIDE.md)**

## 📊 **Производительность**

### **Оптимизации**
- ⚡ **Next.js Image** оптимизация
- 🔄 **Static Generation** где возможно
- 📈 **Incremental Static Regeneration**
- 🌐 **Edge Runtime** для API
- 📦 **Bundle размер** оптимизирован

### **SEO**
- 🔍 **Метатеги** для всех страниц
- 📊 **Structured Data** (JSON-LD)
- 🗺️ **XML Sitemap** автогенерация
- 🔗 **Open Graph** превью
- 📱 **Mobile-friendly**

## 🛡️ **Безопасность**

- 🔐 **NextAuth.js** аутентификация
- ✅ **Zod** валидация входных данных
- 🛡️ **CSRF** защита
- 🔒 **Rate limiting** для API
- 🚫 **XSS** защита

## 🧪 **Тестирование**

```bash
# Запуск тестов (когда добавлены)
npm run test

# E2E тесты
npm run test:e2e

# Проверка типов
npm run type-check
```

## 📈 **Аналитика**

- 📊 **Vercel Analytics** - производительность
- 🎯 **Vercel Speed Insights** - Core Web Vitals
- 👥 **Посетители** - трекинг через Prisma
- 📦 **Заказы** - статистика продаж

## 🤝 **Вклад в проект**

1. Сделайте fork репозитория
2. Создайте ветку для новой функции
3. Внесите изменения и добавьте тесты
4. Убедитесь, что все тесты проходят
5. Создайте Pull Request

## 📞 **Поддержка**

При возникновении вопросов:
- 📧 **Email**: support@technomart.ru
- 💬 **Telegram**: @technomart_support
- 📖 **Документация**: /docs

---

## 🗄️ **База данных**

Проект использует **PostgreSQL** через **Prisma ORM**.

**Рекомендуемые провайдеры:**
- **Prisma Cloud** (рекомендуется)
- **Vercel Postgres** 
- **Supabase**
- **Neon**

📖 **[Инструкция по настройке БД](./SETUP.md)**

---

**© 2024 TechnoMart. Сделано с ❤️ на Next.js** 

## 📊 Мониторинг и здоровье системы

### Health Check API
Проверьте состояние системы: `GET /api/health`

Ответ:
```json
{
  "status": "healthy",
  "timestamp": "2024-01-01T00:00:00.000Z",
  "database": {
    "status": "healthy",
    "latency": 45
  },
  "environment": "development",
  "uptime": 123.45
}
```

### Мониторинг производительности
- 🐌 Автоматическое логирование медленных запросов (>1000ms)
- 🔄 Retry логика для сбоев базы данных
- 📈 Оптимизированные запросы с правильными индексами

## 🛡️ Безопасность

- ✅ **JWT аутентификация** с безопасными токенами
- ✅ **Валидация данных** с Zod схемами
- ✅ **SQL Injection защита** через Prisma ORM
- ✅ **Rate limiting** для API endpoints
- ✅ **Безопасные каскадные удаления**

## 🏗️ Архитектура

### Технологический стек
- **Frontend:** Next.js 14, React 18, TypeScript
- **Styling:** Tailwind CSS, Radix UI
- **Backend:** Next.js API Routes
- **Database:** PostgreSQL с Prisma ORM
- **Authentication:** NextAuth.js с JWT
- **State Management:** Zustand
- **Validation:** Zod

### Структура базы данных
- 👥 **Users** - пользователи и администраторы
- 📦 **Products** - товары с изображениями и характеристиками
- 🏷️ **Categories** - иерархические категории
- 🏢 **Brands** - бренды товаров
- 🛒 **CartItems** - элементы корзины
- ❤️ **WishlistItems** - избранные товары
- ⚖️ **CompareItems** - товары для сравнения
- 📋 **Orders** - заказы с элементами
- ⭐ **Reviews** - отзывы с изображениями

## 🔧 Команды разработки

```bash
# Разработка
npm run dev

# Сборка
npm run build

# Запуск продакшн
npm start

# База данных
npx prisma studio      # Просмотр данных
npx prisma db push     # Применить схему
npx prisma generate    # Генерация клиента
npx prisma db pull     # Синхронизация схемы

# Деплой
npm run check-deploy   # Проверка готовности
npm run pre-deploy     # Подготовка к деплою
```

## 🚀 Деплой

### Vercel (рекомендуется)
1. Подключите репозиторий к Vercel
2. Создайте Postgres базу в Vercel Storage
3. Добавьте переменные окружения
4. Деплой произойдет автоматически

### Другие платформы
- Railway
- Render
- DigitalOcean App Platform
- AWS/Google Cloud/Azure

## 📈 Производительность

### Оптимизации базы данных
- 📊 **Индексы** для всех часто используемых полей
- 🔄 **Connection pooling** для масштабируемости
- ⚡ **Оптимизированные запросы** с правильными include
- 🎯 **Пагинация** с безопасными лимитами

### Рекомендации по производительности
- Используйте `DATABASE_URL_NON_POOLING` для миграций
- Мониторьте медленные запросы через `/api/health`
- Настройте connection limits в DATABASE_URL
- Используйте CDN для статических файлов

## 🔍 Анализ базы данных

Проект прошел полный аудит базы данных с исправлением критических проблем:

### ✅ Исправленные проблемы:
1. **Переменные окружения** - исправлены конфликты в schema.prisma
2. **Индексы производительности** - добавлены для всех критических полей
3. **Каскадные удаления** - исправлены небезопасные настройки
4. **Connection pooling** - добавлена поддержка для продакшн нагрузки
5. **Retry логика** - автоматические повторы при сбоях
6. **Мониторинг** - отслеживание медленных запросов и ошибок

### 📊 Ожидаемые улучшения:
- ⚡ **Производительность:** +60-80% скорость запросов
- 🔒 **Безопасность:** Полная защита от SQL injection
- 🛡️ **Надежность:** Автоматическое восстановление после сбоев
- 📈 **Масштабируемость:** Поддержка высокой нагрузки

## 📚 Документация

- 📖 **[SETUP.md](./SETUP.md)** - Подробная настройка
- 🚀 **[DEPLOY_GUIDE.md](./DEPLOY_GUIDE.md)** - Руководство по деплою
- 🔧 **[TROUBLESHOOTING.md](./TROUBLESHOOTING.md)** - Решение проблем
- 🔍 **[DATABASE_ANALYSIS.md](./DATABASE_ANALYSIS.md)** - Анализ базы данных

## 🤝 Поддержка

Если у вас возникли проблемы:
1. Проверьте `/api/health` для диагностики
2. Изучите [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)
3. Проверьте логи в консоли разработчика
4. Создайте issue в репозитории

## 📄 Лицензия

MIT License - смотрите [LICENSE](./LICENSE) файл для деталей.

---

**TechnoMart** - современное решение для интернет-торговли с фокусом на производительность, безопасность и удобство использования. 🚀 